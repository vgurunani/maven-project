pipeline
{
  agent any
  {
    stages
    {
      stage ('SCM Checkout')
      {
        git 'https://github.com/vgurunani/maven-project.git'
      }
    } 
    {
      stage ('build and sonar')
      {
        steps
        {
          withSonarQubeEnv(credentialsId: 'jenkinstosonar')
          {
            withMaven(maven: 'LocalMaven')
            {
              sh 'mvn clean package sonar:sonar'
            }  
          }
        }
      }
    }
  }
}
